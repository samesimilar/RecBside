#N canvas 258 201 1398 794 10;
#X obj 77 36 loadbang;
#X msg 81 311 grab;
#X obj 80 288 delay 500;
#X obj 389 296 f 1;
#X obj 421 272 symbol noname;
#X msg 424 297 open \$1;
#X obj 836 190 symbol \$1;
#X obj 846 290 textfile;
#X obj 705 160 t b b b, f 21;
#X msg 763 187 rewind;
#X obj 706 187 until;
#X obj 52 34 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 838 233 pack s;
#X msg 842 256 read \$1 cr;
#X obj 903 381 symbol;
#X text 403 207 open the desginated (usb-"qwerty") keyboard device
, f 38;
#X text 61 348 The grab message reserves this device for our patch.
, f 25;
#X text 703 59 read HIDSelector-Config.txt (\$1) configuration file
\; (there is just one option to configure now);
#X obj 890 444 s \$0-hidSelectorInputId;
#X obj 488 250 r \$0-hidSelectorInputId;
#X obj 421 335 hid_grabber, f 14;
#X obj 425 390 route syn msc;
#X obj 462 502 v \$0-hid_current_app_layer 2;
#X obj 437 612 send;
#X obj 433 471 t l b;
#X msg 464 559 hidsrin-\$1;
#X obj 464 580 symbol;
#X obj 465 528 pack f;
#X obj 433 416 list;
#X obj 75 77 t b b b b b, f 17;
#X obj 264 73 f 2;
#X obj 262 105 s \$0-hid_current_app_layer;
#N canvas 614 244 872 660 key_filter 0;
#X obj 85 19 inlet;
#X obj 96 417 outlet;
#X obj 75 80 route key;
#X obj 156 172 t b l;
#X obj 154 234 list append;
#X obj 163 205 symbol key;
#X obj 191 85 route key_rightctrl key_leftctrl;
#X obj 280 171 v \$0-ctrlstate;
#X obj 146 364 spigot;
#X obj 205 319 v \$0-ctrlstate;
#X obj 204 342 == 0;
#X obj 148 273 t l b;
#X obj 409 179 t l b;
#X obj 439 243 v \$0-ctrlstate;
#X obj 438 271 != 0;
#X obj 428 313 spigot;
#X obj 407 418 outlet;
#X obj 86 44 route list;
#X obj 383 116 list;
#X text 21 187 send anything else;
#X text 257 65 reserve ctrl key modifier;
#X text 230 277 pass through if ctrl key not pressed, f 17;
#X text 229 217 re-prepend 'key' symbol \; (removed by `route`);
#X text 490 268 send ctrl+ reserved combinations out right outlet,
f 25;
#X connect 0 0 17 0;
#X connect 2 0 6 0;
#X connect 2 1 1 0;
#X connect 3 0 5 0;
#X connect 3 1 4 1;
#X connect 4 0 11 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 6 1 7 0;
#X connect 6 2 18 0;
#X connect 8 0 1 0;
#X connect 9 0 10 0;
#X connect 10 0 8 1;
#X connect 11 0 8 0;
#X connect 11 1 9 0;
#X connect 12 0 15 0;
#X connect 12 1 13 0;
#X connect 13 0 14 0;
#X connect 14 0 15 1;
#X connect 15 0 16 0;
#X connect 17 0 2 0;
#X connect 18 0 12 0;
#X connect 18 0 3 0;
#X restore 432 443 pd key_filter;
#X obj 593 469 s \$0-hidsr-system-keys;
#X obj 96 503 r \$0-hidsr-system-keys;
#X obj 147 544 unpack s f;
#X obj 94 570 simplescani key_;
#X obj 230 613 == 1;
#X obj 126 616 spigot;
#X obj 126 649 s \$0-hid_current_app_layer;
#X obj 726 537 r \$0-hid_current_app_layer;
#X msg 721 590 Current app layer: \$1;
#X obj 730 563 pack f;
#X obj 727 619 print hidsr;
#X text 2 549 get ctrl+number keys;
#X text 108 475 read reserved ctrl+ keys;
#X text 707 99 The configuration file is created by the HIDSelectorSetup
patch., f 43;
#X text 767 384 more config options could be routed from here in the
future, f 15;
#X obj 899 349 route hidSelectorInputId hidSelectorDefaultLayer;
#X obj 1037 379 f 1;
#X obj 1083 424 s \$0-hid_current_app_layer;
#X connect 0 0 29 0;
#X connect 1 0 20 0;
#X connect 2 0 1 0;
#X connect 3 0 20 0;
#X connect 4 0 5 0;
#X connect 5 0 20 0;
#X connect 6 0 12 0;
#X connect 7 0 48 0;
#X connect 7 1 10 1;
#X connect 8 0 10 0;
#X connect 8 1 9 0;
#X connect 8 2 6 0;
#X connect 9 0 7 0;
#X connect 10 0 7 0;
#X connect 11 0 29 0;
#X connect 12 0 13 0;
#X connect 13 0 7 0;
#X connect 14 0 18 0;
#X connect 19 0 4 1;
#X connect 20 0 21 0;
#X connect 21 2 28 0;
#X connect 22 0 27 0;
#X connect 24 0 23 0;
#X connect 24 1 22 0;
#X connect 25 0 26 0;
#X connect 26 0 23 1;
#X connect 27 0 25 0;
#X connect 28 0 32 0;
#X connect 29 0 2 0;
#X connect 29 1 3 0;
#X connect 29 2 4 0;
#X connect 29 3 8 0;
#X connect 29 4 30 0;
#X connect 30 0 31 0;
#X connect 32 0 24 0;
#X connect 32 1 33 0;
#X connect 34 0 35 0;
#X connect 35 0 36 0;
#X connect 35 1 37 0;
#X connect 36 0 38 0;
#X connect 37 0 38 1;
#X connect 38 0 39 0;
#X connect 40 0 42 0;
#X connect 41 0 43 0;
#X connect 42 0 41 0;
#X connect 48 0 14 0;
#X connect 48 1 49 0;
#X connect 49 0 50 0;
